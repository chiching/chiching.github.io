"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["9777"],{8174:function(e,r,n){n.r(r),n.d(r,{default:function(){return l}});var s=n(5893),a=n(65);function d(e){let r=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",code:"code",pre:"pre",h2:"h2",p:"p"},(0,a.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.h1,{id:"dameng",children:["dameng",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#dameng",children:"#"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["download docker image from ",(0,s.jsxs)(r.a,{href:"#refer-1",children:[(0,s.jsx)(r.code,{children:"<sup>"}),"1 ",(0,s.jsx)(r.code,{children:"<sup>"})]})]}),"\n",(0,s.jsxs)(r.li,{children:["load image ",(0,s.jsx)(r.code,{children:"docker load -i dm8_20220822_rev166351_x86_rh6_64_ctm.tar "})]}),"\n",(0,s.jsxs)(r.li,{children:["start container ",(0,s.jsx)(r.code,{children:"docker run -d -p 5236:5236 --restart=always --name dm8_01 --privileged=true -e PAGE_SIZE=16 -e EXTENT_SIZE=16 -e CASE_SENSITIVE=n -e UNICODE_FLAG=1 -e LENGTH_IN_CHAR=1 -e LD_LIBRARY_PATH=/opt/dmdbms/bin -e INSTANCE_NAME=dm8_01 -v /opt/dameng:/opt/dmdbms/data dm8_single:dm8_20230808_rev197096_x86_rh6_64"})]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"docker compose \r\n\r\nversion: '3'\r\nnetworks:\r\n  User_br:\r\n    external: true\r\nservices:\r\n  dm8_01:\r\n    image: dm8_single:dm8_20230808_rev197096_x86_rh6_64\r\n    restart: always\r\n    environment:\r\n      - PAGE_SIZE=16\r\n      - EXTENT_SIZE=16\r\n      - CASE_SENSITIVE=n\r\n      - UNICODE_FLAG=1\r\n      - LENGTH_IN_CHAR=1\r\n      - LD_LIBRARY_PATH=/opt/dmdbms/bin\r\n      - INSTANCE_NAME=dm8_01\r\n      - LANG=en_US.UTF-8\r\n    volumes:\r\n      - ./data:/opt/dmdbms/data\r\n      - ./dm.key:/opt/dmdbms/bin/dm.key\r\n    networks:\r\n      - User_br\r\n    ports:\r\n      - \"5236:5236\"\r\n\n"})}),"\n",(0,s.jsxs)(r.h2,{id:"ref",children:["Ref",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#ref",children:"#"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["[1] ",(0,s.jsx)(r.a,{href:"https://eco.dameng.com/document/dm/zh-cn/start/dm-install-docker.html",target:"_blank",rel:"noopener noreferrer",children:"达梦"})]}),"\n",(0,s.jsxs)(r.li,{children:["[2] ",(0,s.jsx)(r.a,{href:"https://eco.dameng.com/document/dm/zh-cn/start/dm-instance-linux.html",target:"_blank",rel:"noopener noreferrer",children:"达梦"})]}),"\n",(0,s.jsxs)(r.li,{children:["[3] ",(0,s.jsx)(r.a,{href:"https://blog.csdn.net/Oracle_veritas/article/details/128666899",target:"_blank",rel:"noopener noreferrer",children:"达梦"})]}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"init",children:["init",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#init",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.code,{children:" ./dminit path=/dm8/data PAGE_SIZE=16 EXTENT_SIZE=16 CASE_SENSITIVE=n CHARSET=1 LENGTH_IN_CHAR=1"})}),"\n",(0,s.jsxs)(r.h2,{id:"connect",children:["connect",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#connect",children:"#"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-shell",children:"SYSDBA/SYSDBA001 新版\r\n/dm8/tool/disql \r\n\r\nrlwrap /opt/dmdbms/bin/disql SYSDBA/SYSDBA001\r\n\r\nfor docker `docker exec -it dm-dm8_01-1 rlwrap /opt/dmdbms/bin/disql SYSDBA/SYSDBA001`\r\n\r\nconn XXL_JOB/User_2022@127.0.0.1:5236\r\nconn User_lease/User_2022@127.0.0.1:5236\n"})}),"\n",(0,s.jsxs)(r.h2,{id:"create-tablespace",children:["create tablespace",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#create-tablespace",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.code,{children:"select tablespace_name from dba_tablespaces;"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"\r\n# create tablespace \"User_lease\" datafile '/dm8/data/User_lease' size 10240 autoextend on maxsize 33554431 CACHE = NORMAL;\r\n# create tablespace \"xxl_job\" datafile '/dm8/data/xxl_job' size 10240 autoextend on maxsize 33554431 CACHE = NORMAL;\r\n\r\ncreate tablespace \"User_lease\" datafile '/opt/dmdbms/data/User_lease.dbf' size 10240 autoextend on next 100 CACHE = NORMAL;\r\ncreate tablespace \"xxl_job\" datafile '/opt/dmdbms/data/xxl_job.dbf' size 10240 autoextend on next 100 CACHE = NORMAL;\r\n\n"})}),"\n",(0,s.jsxs)(r.h2,{id:"create-dbuser",children:["create dbuser",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#create-dbuser",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.code,{children:"select username from dba_users;"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:'CREATE USER "User_lease" IDENTIFIED BY "User_2022" LIMIT FAILED_LOGIN_ATTEMPS 3, PASSWORD_LOCK_TIME 1, PASSWORD_GRACE_TIME 10 DEFAULT TABLESPACE "User_lease" DEFAULT INDEX TABLESPACE "User_lease";\r\n\r\ngrant "DBA","PUBLIC","SOI" to "User_lease";\r\n\r\ngrant CREATE SESSION to "User_lease";\n'})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:'CREATE USER "XXL_JOB" IDENTIFIED BY "User_2022" LIMIT FAILED_LOGIN_ATTEMPS 3, PASSWORD_LOCK_TIME 1, PASSWORD_GRACE_TIME 10 DEFAULT TABLESPACE "xxl_job" DEFAULT INDEX TABLESPACE "xxl_job";\r\n\r\ngrant "DBA","PUBLIC","SOI" to "XXL_JOB";\r\n\r\ngrant CREATE SESSION to "XXL_JOB";\n'})}),"\n",(0,s.jsxs)(r.h2,{id:"drop-user",children:["drop user",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#drop-user",children:"#"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"drop user xxx cascade;\n"})}),"\n",(0,s.jsxs)(r.h2,{id:"export--import",children:["export && import",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#export--import",children:"#"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-shell",children:"/opt/dmdbms/bin/dexp xxl_job/User_2022@127.0.0.1:5236 file=xxl_job.dmp SCHEMAS=xxl_job\r\n/opt/dmdbms/bin/dexp User_lease/User_2022@127.0.0.1:5236 file=User_lease.dmp SCHEMAS=User_lease\r\n\r\n/opt/dmdbms/bin/dimp xxl_job/User_2022@127.0.0.1:5236 file=xxl_job.dmp SCHEMAS=xxl_job TABLE_EXISTS_ACTION=REPLACE\r\n/opt/dmdbms/bin/dimp User_lease/User_2022@127.0.0.1:5236 file=User_lease.dmp SCHEMAS=User_lease TABLE_EXISTS_ACTION=REPLACE\r\n\n"})})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,a.ah)(),e.components);return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}let l=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["notes%2F03-Databases%20%26%20Data%20Storage%2Fdm-install.md"]={toc:[{text:"Ref",id:"ref",depth:2},{text:"init",id:"init",depth:2},{text:"connect",id:"connect",depth:2},{text:"create tablespace",id:"create-tablespace",depth:2},{text:"create dbuser",id:"create-dbuser",depth:2},{text:"drop user",id:"drop-user",depth:2},{text:"export && import",id:"export--import",depth:2}],title:"dameng",frontmatter:{}}}}]);