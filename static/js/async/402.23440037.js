"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["402"],{9394:function(e,s,t){t.r(s),t.d(s,{default:function(){return d}});var r=t(5893),n=t(65);function i(e){let s=Object.assign({p:"p",h2:"h2",a:"a",br:"br"},(0,n.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"#psql"}),"\n",(0,r.jsxs)(s.h2,{id:"export-data",children:["export data",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#export-data",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:'psql -h 127.0.0.1 -U mangopie -d mangopie -t -A -F"," -c "select * from energy_meter where company_id = 140" > meters.csv'}),"\n",(0,r.jsx)(s.p,{children:'psql -h 127.0.0.1 -U mangopie -d mangopie -t -A -F"," -c "select * from energy_system where company_id = 140" > systems.csv'}),"\n",(0,r.jsx)(s.p,{children:"COPY (select * from energy_system where id in (246, 247, 3395) union select * from energy_system where parent_system_id in (select id from energy_system where parent_system_id in (246, 247, 3395)) union select * from energy_system where parent_system_id in ( select id from energy_system where parent_system_id in (select id from energy_system where parent_system_id in (247, 3395))) union select * from energy_system where parent_system_id in ( select id from energy_system where parent_system_id in (select id from energy_system where parent_system_id in (select id from energy_system where parent_system_id in (247, 3395)))) order by id) TO 'systems.csv' CSV HEADER"}),"\n",(0,r.jsx)(s.p,{children:"CASE department_id WHEN null THEN '00000000-0000-0000-0000-000000000000' ELSE department_id END"}),"\n",(0,r.jsx)(s.p,{children:'psql -d user -t -A -F"," -c "select id, email, first_name, last_name, CASE department_id WHEN null THEN \'00000000-0000-0000-0000-000000000000\' ELSE department_id END,current_timestamp, current_timestamp from profiles;" > profile.csv'}),"\n",(0,r.jsx)(s.p,{children:'gcloud sql connect dev-tep-postgresql -d user -u user -t -A -F"," -c "select id, email, first_name, last_name, CASE department_id WHEN null THEN \'00000000-0000-0000-0000-000000000000\' ELSE department_id END,current_timestamp, current_timestamp from profiles;" > profiles.csv'}),"\n",(0,r.jsxs)(s.p,{children:["gcloud sql export csv dev-tep-postgresql gs://en-trak_tep_storage/sql_exports/export_profiles.csv ",(0,r.jsx)(s.br,{}),"\n","--database=user ",(0,r.jsx)(s.br,{}),"\n","--offload ",(0,r.jsx)(s.br,{}),"\n","--query=\"select id, email, first_name, last_name, CASE WHEN department_id IS null THEN '00000000-0000-0000-0000-000000000000' ELSE department_id END,current_timestamp, current_timestamp from profiles;\""]}),"\n",(0,r.jsxs)(s.h2,{id:"import",children:["import",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#import",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"gcloud sql import csv dev-tep-postgresql gs://en-trak_tep_storage/sql_exports/export_profiles.csv --database=node --table=profiles"}),"\n",(0,r.jsx)(s.p,{children:"COPY profiles(id, email, first_name, last_name, department_id) FROM 'C:/Users/chiching/Desktop/profile.csv' WITH (FORMAT csv);"}),"\n",(0,r.jsx)(s.p,{children:"COPY energy_meter FROM '~/meters.csv' WITH (FORMAT csv);"}),"\n",(0,r.jsx)(s.p,{children:"COPY energy_system(id,name,name_zh_tw,source_key,category_id,company_id,meter_id,parent_system_id,city_id,location_id,component_of_id,weight,datasource_type,active,power_plan_id,is_billing_level,equipment_index,equipment_type,equipment_unit,composition_expression,sensor_id,is_solar) FROM '/systems.csv' WITH (FORMAT csv);"}),"\n",(0,r.jsx)(s.p,{children:"COPY energy_system  FROM '/systems.csv' WITH (FORMAT csv, encoding 'gbk18030');"}),"\n",(0,r.jsx)(s.p,{children:'psql -h 127.0.0.1 -U mangopie -d mangopie -t -A -F"," -c "select * from energy_system where id in (246, 247, 3395) union select * from energy_system where parent_system_id in (select id from energy_system where parent_system_id in (246, 247, 3395)) union select * from energy_system where parent_system_id in ( select id from energy_system where parent_system_id in (select id from energy_system where parent_system_id in (247, 3395))) union select * from energy_system where parent_system_id in ( select id from energy_system where parent_system_id in (select id from energy_system where parent_system_id in (select id from energy_system where parent_system_id in (247, 3395)))) order by id" > systems.csv'}),"\n",(0,r.jsx)(s.p,{children:"select * from energy_system f left join energy_system s on f.parent_system_id = s.id where f.id = 246"})]})}function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,n.ah)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(i,{...e})}):i(e)}let d=m;m.__RSPRESS_PAGE_META={},m.__RSPRESS_PAGE_META["notes%2F03-Databases%20%26%20Data%20Storage%2Fpostgres%2Fpsql%20cmd.md"]={toc:[{text:"export data",id:"export-data",depth:2},{text:"import",id:"import",depth:2}],title:"",frontmatter:{}}}}]);