"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["6527"],{4633:function(e,n,r){r.r(n),r.d(n,{default:function(){return o}});var t=r(5893),c=r(65);function l(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",code:"code",br:"br",pre:"pre"},(0,c.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"lets-encript",children:["let's encript",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#lets-encript",children:"#"})]}),"\n",(0,t.jsxs)(n.h2,{id:"get-image",children:["get image",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#get-image",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"docker pull  certbot/certbot"})}),"\n",(0,t.jsxs)(n.p,{children:["docker run -it  --net host --rm --name certbot ",(0,t.jsx)(n.br,{}),"\n",'-v "./ssl/:/etc/letsencrypt/" ',(0,t.jsx)(n.br,{}),"\n",'-v "./letsencrypt/:/var/lib/letsencrypt" ',(0,t.jsx)(n.br,{}),"\n",'-v "./log/:/var/log/letsencrypt" ',(0,t.jsx)(n.br,{}),"\n",'-v "./www/:/var/www/html/" ',(0,t.jsx)(n.br,{}),"\n","certbot/certbot certonly -n --no-eff-email --email ",(0,t.jsx)(n.a,{href:"mailto:test@domain.com",children:"test@domain.com"})," --agree-tos --webroot -w /var/www/html -d confluence.app.domain.com"]}),"\n",(0,t.jsx)(n.p,{children:"server {\r\nlisten 80;\r\nserver_name confluence.app.domain.com;"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"location ~ /.well-known/acme-challenge {\r\n    allow all;\r\n    root /var/www/html/confluence/;\r\n}\r\n\r\nlocation / {\r\n    proxy_pass http://10.230.168.212:8082;\r\n    proxy_set_header	Host $host;\r\n	proxy_set_header	X-Forwarded-For $proxy_add_x_forwarded_for;\r\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"}"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:' location ^~ /.well-known/acme-challenge/ {\r\n    default_type "text/plain"; \r\n    root   /var/www/html;\r\n} \n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://confluence.app.domain.com/.well-known/acme-challenge/abc.txt",target:"_blank",rel:"noopener noreferrer",children:"https://confluence.app.domain.com/.well-known/acme-challenge/abc.txt"})})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,c.ah)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}let o=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["notes%2F02-Software%20Development%2Fmiddlewares%2Fnginx%2Fletsencrypt.md"]={toc:[{text:"get image",id:"get-image",depth:2}],title:"let's encript",frontmatter:{}}}}]);