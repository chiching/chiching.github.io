"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["2395"],{2868:function(e,r,n){n.r(r),n.d(r,{default:function(){return i}});var a=n(5893),o=n(65);function s(e){let r=Object.assign({h1:"h1",a:"a",h2:"h2",pre:"pre",code:"code",p:"p",ol:"ol",li:"li"},(0,o.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.h1,{id:"migration",children:["migration",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#migration",children:"#"})]}),"\n",(0,a.jsxs)(r.h2,{id:"tools-chameleon",children:["tools chameleon",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#tools-chameleon",children:"#"})]}),"\n",(0,a.jsxs)(r.h2,{id:"config",children:["config",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#config",children:"#"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{children:'---\r\n# global settings\r\npid_dir: \'~/.pg_chameleon/pid/\'\r\nlog_dir: \'~/.pg_chameleon/logs/\'\r\nlog_dest: file\r\nlog_level: info\r\nlog_days_keep: 10\r\nrollbar_key: \'\'\r\nrollbar_env: \'\'\r\ndump_json: No\r\n\r\n# type_override allows the user to override the default type conversion\r\n# into a different one.\r\n\r\ntype_override:\r\n  "tinyint(1)":\r\n    override_to: boolean\r\n    override_tables:\r\n      - "*"\r\n\r\n# postgres  destination connection\r\npg_conn:\r\n  host: "10.230.168.234"\r\n  port: "15432"\r\n  user: "<ORG_NAME>_admin"\r\n  password: "<ORG_NAME>#2023"\r\n  database: "<ORG_NAME>_lease"\r\n  charset: "utf8"\r\n\r\nsources:\r\n  mysql:\r\n    readers: 4\r\n    writers: 4\r\n    db_conn:\r\n      host: "10.230.168.234"\r\n      port: "3306"\r\n      user: "root"\r\n      password: "<ORG_NAME>#2023"\r\n      charset: \'utf8\'\r\n      connect_timeout: 10\r\n    schema_mappings:\r\n      <ORG_NAME>_lease: public\r\n    limit_tables:\r\n      - delphis_mediterranea.foo\r\n    skip_tables:\r\n      - delphis_mediterranea.bar\r\n    grant_select_to:\r\n      - usr_readonly\r\n    lock_timeout: "120s"\r\n    my_server_id: 100\r\n    replica_batch_size: 10000\r\n    replay_max_rows: 10000\r\n    batch_retention: \'1 day\'\r\n    copy_max_memory: "300M"\r\n    copy_mode: \'file\'\r\n    out_dir: /tmp\r\n    sleep_loop: 1\r\n    on_error_replay: continue\r\n    on_error_read: continue\r\n    auto_maintenance: "disabled"\r\n    gtid_enable: false\r\n    type: mysql\r\n    skip_events:\r\n      insert:\r\n        - delphis_mediterranea.foo  # skips inserts on delphis_mediterranea.foo\r\n      delete:\r\n        - delphis_mediterranea  # skips deletes on schema delphis_mediterranea\r\n      update:\r\n    keep_existing_schema: No\r\n    migrate_default_value: Yes\r\n    column_case_sensitive: Yes\r\n    mysql_restart_config: Yes\r\n\r\n  pgsql:\r\n    db_conn:\r\n      host: "localhost"\r\n      port: "5432"\r\n      user: "usr_replica"\r\n      password: "never_commit_passwords"\r\n      database: "db_replica"\r\n      charset: \'utf8\'\r\n      connect_timeout: 10\r\n      schema_mappings:\r\n        loxodonta_africana: elephas_maximus\r\n      limit_tables:\r\n        - loxodonta_africana.foo\r\n      skip_tables:\r\n        - loxodonta_africana.bar\r\n      copy_max_memory: "300M"\r\n      grant_select_to:\r\n        - usr_readonly\r\n      lock_timeout: "10s"\r\n      my_server_id: 100\r\n      replica_batch_size: 3000\r\n      replay_max_rows: 10000\r\n      sleep_loop: 5\r\n      batch_retention: \'1 day\'\r\n      copy_mode: \'file\'\r\n      out_dir: /tmp\r\n      type: pgsql\r\n\n'})}),"\n",(0,a.jsxs)(r.h2,{id:"command",children:["command",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#command",children:"#"})]}),"\n",(0,a.jsx)(r.p,{children:"chameleon create_replica_schema --config default\r\nchameleon add_source --config default --source mysql\r\nchameleon init_replica --config default --source mysql"}),"\n",(0,a.jsxs)(r.h2,{id:"ref",children:["ref",(0,a.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#ref",children:"#"})]}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"https://gitee.com/opengauss/openGauss-tools-chameleon/blob/5.0.0/chameleon%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.md",target:"_blank",rel:"noopener noreferrer",children:"chameleon使用指南"})}),"\n"]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,o.ah)(),e.components);return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(s,{...e})}):s(e)}let i=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["notes%2F03-Databases%20%26%20Data%20Storage%2Fopengauss%2Fmigrate_chameleon.md"]={toc:[{text:"tools chameleon",id:"tools-chameleon",depth:2},{text:"config",id:"config",depth:2},{text:"command",id:"command",depth:2},{text:"ref",id:"ref",depth:2}],title:"migration",frontmatter:{}}}}]);