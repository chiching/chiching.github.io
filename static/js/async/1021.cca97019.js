"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["1021"],{8457:function(e,a,n){n.r(a),n.d(a,{default:function(){return i}});var r=n(5893),h=n(65);function t(e){let a=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",code:"code",h3:"h3",pre:"pre"},(0,h.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.h1,{id:"hugepage",children:["Hugepage",(0,r.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#hugepage",children:"#"})]}),"\n",(0,r.jsxs)(a.h2,{id:"view-hugepgage-value",children:["view hugepgage value",(0,r.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#view-hugepgage-value",children:"#"})]}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.code,{children:"cat /proc/meminfo |grep Huge"})}),"\n",(0,r.jsxs)(a.h2,{id:"view-mount-status",children:["view mount status",(0,r.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#view-mount-status",children:"#"})]}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.code,{children:" cat /proc/mounts | grep huge"})}),"\n",(0,r.jsxs)(a.h2,{id:"view-hugepage-config",children:["view hugepage config",(0,r.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#view-hugepage-config",children:"#"})]}),"\n",(0,r.jsx)(a.p,{children:"cat /proc/cmdline\r\nBOOT_IMAGE=/vmlinuz-3.10.0-957.1.3.el7.x86_64 root=/dev/mapper/VG_Root-root ro crashkernel=auto rhgb quiet default_hugepagesz=1G hugepagesz=1G hugepages=70 transparent_hugepage=never isolcpus=1-9,11-19,21-29,31-39"}),"\n",(0,r.jsx)(a.p,{children:'cat /etc/default/grub\r\nGRUB_CMDLINE_LINUX="crashkernel=auto rhgb quiet default_hugepagesz=1G hugepagesz=1G hugepages=70 transparent_hugepage=never isolcpus=1-9,11-19,21-29,31-39"'}),"\n",(0,r.jsxs)(a.h2,{id:"config-hugepage",children:["config hugepage",(0,r.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#config-hugepage",children:"#"})]}),"\n",(0,r.jsxs)(a.h3,{id:"edit-grub",children:["edit grub",(0,r.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#edit-grub",children:"#"})]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-shell",children:' GRUB_CMDLINE_LINUX="crashkernel=auto rhgb quiet default_hugepagesz=1G hugepagesz=1G hugepages=70 transparent_hugepage=never isolcpus=1-9,11-19,21-29,31-39"\r\n\r\n grub2-mkconfig -o /boot/grub2/grub.cfg\r\n\r\n reboot\n'})}),"\n",(0,r.jsxs)(a.h2,{id:"edit-sysctl",children:["edit sysctl",(0,r.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#edit-sysctl",children:"#"})]}),"\n",(0,r.jsx)(a.p,{children:"/etc/sysctl.conf\r\nvm.nr_hugepages\r\necho 10 > /proc/sys/vm/nr_hugepages"}),"\n",(0,r.jsxs)(a.h2,{id:"mount-device",children:["mount device",(0,r.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#mount-device",children:"#"})]}),"\n",(0,r.jsx)(a.p,{children:"#mkdir\xa0-p\xa0/mnt/huge\r\n#mkdir\xa0-p\xa0/mnt/huge_2mb"}),"\n",(0,r.jsx)(a.p,{children:"#mount\xa0-t hugetlbfs none\xa0/mnt/huge_2mb\xa0-o pagesize=2MB（没有-o参数，挂载系统默认hugepage大小, -o参数指定挂载2M的hugepage大小）"})]})}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:a}=Object.assign({},(0,h.ah)(),e.components);return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}let i=s;s.__RSPRESS_PAGE_META={},s.__RSPRESS_PAGE_META["notes%2F01-Cloud%20Computing%2FLinux%2Fhugepage.md"]={toc:[{text:"view hugepgage value",id:"view-hugepgage-value",depth:2},{text:"view mount status",id:"view-mount-status",depth:2},{text:"view hugepage config",id:"view-hugepage-config",depth:2},{text:"config hugepage",id:"config-hugepage",depth:2},{text:"edit grub",id:"edit-grub",depth:3},{text:"edit sysctl",id:"edit-sysctl",depth:2},{text:"mount device",id:"mount-device",depth:2}],title:"Hugepage",frontmatter:{}}}}]);