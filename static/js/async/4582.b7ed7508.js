"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["4582"],{4325:function(n,e,r){r.r(e),r.d(e,{default:()=>d});var t=r("5893"),i=r("65");let u=r.p+"static/image/1702820067845.38c94f16.png";function s(n){let e=Object.assign({h1:"h1",a:"a",p:"p",pre:"pre",code:"code",img:"img"},(0,i.ah)(),n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h1,{id:"用rust接视频输入输出",children:["用rust接视频输入输出",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#用rust接视频输入输出",children:"#"})]}),"\n",(0,t.jsx)(e.p,{children:"现在来了解一下视频输入输出的相关API，如何通过rust接Axera的视频输入输出，以便将内容读取，然后给模型做分析，后面做结果输出。"}),"\n",(0,t.jsx)(e.p,{children:"主要API以及调用流程，请参考文档《24 - AX VO API 文档.pdf》和《16 - AX VIN 开发参考.pdf》，主要用到了libax_proton.so，libax_vo.so和libax_ivps动态库，提供的函数具体参考文档。"}),"\n",(0,t.jsx)(e.p,{children:"以下是部分参考代码："}),"\n",(0,t.jsx)(e.p,{children:"视频输入部分代码："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'extern "C" {\r\n    // 声明需要调用的函数签名\r\n    pub fn AX_VIN_Init() -> i32; //初始化vin模块\r\n    pub fn AX_VIN_Deinit() -> i32; //释放vin模块\r\n    pub fn AX_VIN_CreateDev(devID: u8) -> i32;  //创建dev， dev取值范围[0, AX_VIN_MAX_DEV_NUM]\r\n    pub fn AX_VIN_DestroyDev(devID: u8) -> i32; //销毁对应的dev\r\n    pub fn AX_VIN_EnableDev(devID: u8) -> i32;  //使能dev\r\n    pub fn AX_VIN_DisableDev(devID: u8) -> i32; //禁止dev\r\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"视频输出部分代码，结构体和枚举定义内容会很多，这里贴一部分样例："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'extern "C" {\r\n    // 声明需要调用的函数签名\r\n    pub fn AX_VO_Init() -> i32; //初始化vo模块的软硬件资源\r\n    pub fn AX_VO_Deinit() -> i32; //释放o模块的软硬件资源\r\n    pub fn AX_VO_SetPubAttr(devID: u8, pub_attr: &AxVoPubAttrT) -> i32;  //设置指定显示设备的公共属性\r\n    pub fn AX_VO_SetCSC(devID: u8, csc: &AxVoCscT) -> i32; // 设置显示设备 CSC\r\n    pub fn AX_VO_Enable(devID: u8) -> i32;  //使能dev\r\n    pub fn AX_VO_Disable(devID: u8) -> i32; //禁止dev\r\n}\r\n\r\n#[repr(u8)]  // Use u8 so it matches with C enum size\r\npub enum AxVoModeE {\r\n    AxVoModelOffline = 0,  \r\n    AxVoModelOnline,  \r\n    AxVoModelButt,  \r\n}\r\n\r\n#[repr(u8)]\r\npub enum AxVoIntfTypeE {\r\n    AxVoIntfDpt,\r\n    AxVoIntfBt601,\r\n    AxVoIntfBt656,\r\n    AxVoIntfBt1120,\r\n    AxVoIntfDsi,\r\n    AxVoIntfHdmi,\r\n    AxVoIntfButt\r\n}\r\n\r\n#[repr(u8)]\r\npub enum AxVoOutFmtE {\r\n   AxVoOutFmtUnused = 0,\r\n   AxVoOutFmtRgb565,\r\n   AxVoOutFmtRgb666,\r\n   AxVoOutFmtRgb666lp,\r\n   AxVoOutFmtRgb888,\r\n   AxVoOutFmtRgb101010,\r\n   AxVoOutFmtYuv422,\r\n   AxVoOutFmtYuv422_10,\r\n   AxVoOutFmtButt\r\n}\r\n\n'})}),"\n",(0,t.jsx)(e.p,{children:"以下是简单的测试，输入模块的初始化，创建设备，销毁设备，以及使能和禁止设备等简单操作的样例。"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:u,alt:"1702820067845"})})]})}function o(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),n.components);return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(s,{...n})}):s(n)}let d=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["notes%2F07-AI%20%26%20Machine%20Learning%2FAXera-Pi%20Pro%2Fvin_vo%2Fvin_vo.md"]={toc:[],title:"用rust接视频输入输出",frontmatter:{}}}}]);